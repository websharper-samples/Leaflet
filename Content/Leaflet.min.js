function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB;a=self;b=a.WebSharper=a.WebSharper||{};c=b.Leaflet=b.Leaflet||{};d=c.Tests=c.Tests||{};e=d.Client=d.Client||{};f=b.Obj=b.Obj||{};g=b.UI=b.UI||{};h=g.Var$1=g.Var$1||{};i=b.Operators=b.Operators||{};j=g.HtmlModule=g.HtmlModule||{};k=j.attr=j.attr||{};l=a.L;m=l&&l.Event;n=g.Var=g.Var||{};o=g.ConcreteVar=g.ConcreteVar||{};p=g.Snap=g.Snap||{};q=g.AttrProxy=g.AttrProxy||{};r=g.AttrModule=g.AttrModule||{};s=g.Doc=g.Doc||{};t=b.JavaScript=b.JavaScript||{};u=t.Pervasives=t.Pervasives||{};v=g.Client=g.Client||{};w=v.Templates=v.Templates||{};x=g.Abbrev=g.Abbrev||{};y=x.Fresh=x.Fresh||{};z=g.Attrs=g.Attrs||{};A=g.DomUtility=g.DomUtility||{};B=g.View=g.View||{};C=g.Docs=g.Docs||{};D=a.EventTarget;E=a.Node;F=t.JS=t.JS||{};G=b.Collections=b.Collections||{};H=G.Dictionary=G.Dictionary||{};I=b.Unchecked=b.Unchecked||{};J=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};K=b.Arrays=b.Arrays||{};L=G.HashSet=G.HashSet||{};M=b.Seq=b.Seq||{};N=a.WindowOrWorkerGlobalScope;O=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};P=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};Q=g.Elt=g.Elt||{};R=g.Array=g.Array||{};S=g.DocElemNode=g.DocElemNode||{};T=a.CharacterData;U=G.DictionaryUtil=G.DictionaryUtil||{};V=a.Object;W=w.Prepare=w.Prepare||{};X=b.Slice=b.Slice||{};Y=b.Enumerator=b.Enumerator||{};Z=G.KeyCollection=G.KeyCollection||{};_0=g.An=g.An||{};_1=v.Settings=v.Settings||{};_2=x.Mailbox=x.Mailbox||{};_3=g.Updates=g.Updates||{};_4=b.List=b.List||{};_5=_4.T=_4.T||{};_6=v.Attrs=v.Attrs||{};_7=_6.Dyn=_6.Dyn||{};_8=b.Strings=b.Strings||{};_9=v.Docs=v.Docs||{};_=_9.RunState=_9.RunState||{};$=_9.NodeSet=_9.NodeSet||{};ba=g.Anims=g.Anims||{};bb=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bc=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};bd=Y.T=Y.T||{};be=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bf=b.Concurrency=b.Concurrency||{};bg=g.AppendList=g.AppendList||{};bh=b.Queue=b.Queue||{};bi=g.Easing=g.Easing||{};bj=bf.AsyncBody=bf.AsyncBody||{};bk=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bl=bf.CT=bf.CT||{};bm=x.HashSet=x.HashSet||{};bn=G.HashSetUtil=G.HashSetUtil||{};bo=bf.Scheduler=bf.Scheduler||{};bp=b.CancellationTokenSource=b.CancellationTokenSource||{};bq=_9.DomNodes=_9.DomNodes||{};br=a.Error;bs=b.OperationCanceledException=b.OperationCanceledException||{};bt=b.Lazy=b.Lazy||{};bu=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bv=b.LazyExtensionsProxy=b.LazyExtensionsProxy||{};bw=bv.LazyRecord=bv.LazyRecord||{};bx=a.IntelliFactory;by=bx&&bx.Runtime;bz=a.console;bA=a.jQuery;bB=a.Date;e.Main=function(){var bC,bD;bC=h.Create$1("");bD=s.Element("div",[],[s.Element("div",[q.Create("style","height: 600px;"),r.OnAfterRender(function(bE){var bF,bG,bH;function bI(bK,bL){return bC.Set("Position: "+bL.latlng.toString());}function bJ(bK,bL){return bC.Set("");}bF=new l.Map(bE);bF.setView([47.49883,19.0582],14);bF.addLayer(new l.TileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",(bG={},bG.attribution="&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>",bG)));bF.addLayer((bH=new l.Marker([47.48553,19.07153]),(bH.bindPopup("IntelliFactory"),bH)));bF.on("mousemove",function(bK){bI(this,bK);});bF.on("mouseout",function(bK){bJ(this,bK);});})],[]),s.Element("div",[],[s.TextView(bC.get_View())])]);w.LoadLocalTemplates("");s.RunById("main",bD);};f=b.Obj=by.Class({Equals:function(bC){return this===bC;},GetHashCode:function(){return -1;}},null,f);f.New=by.Ctor(function(){},f);h=g.Var$1=by.Class({},f,h);h.Create$1=function(bC){return new o.New(false,p.New({$:2,$0:bC,$1:[]}),bC);};i.FailWith=function(bC){throw new br(bC);};i.KeyValue=function(bC){return[bC.K,bC.V];};k=j.attr=by.Class({},f,k);n=g.Var=by.Class({},f,n);n.New=by.Ctor(function(){f.New.call(this);},n);o=g.ConcreteVar=by.Class({get_View:function(){return this.view;},Set:function(bC){if(this.isConst)(function(bD){return bD("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bD){bz.log(bD);}));else{p.Obsolete(this.snap);this.current=bC;this.snap=p.New({$:2,$0:bC,$1:[]});}}},n,o);o.New=by.Ctor(function(bC,bD,bE){var bF;bF=this;n.New.call(this);this.isConst=bC;this.current=bE;this.snap=bD;this.view=function(){return bF.snap;};this.id=y.Int();},o);p.Map=function(bC,bD){var bE,bF;bE=bD.s;return bE!=null&&bE.$==0?p.New({$:0,$0:bC(bE.$0)}):(bF=p.New({$:3,$0:[],$1:[]}),(p.When(bD,function(bG){p.MarkDone(bF,bD,bC(bG));},bF),bF));};p.WhenObsoleteRun=function(bC,bD){var bE;bE=bC.s;bE==null?bD():bE!=null&&bE.$==2?bE.$1.push(bD):bE!=null&&bE.$==3?bE.$1.push(bD):void 0;};p.When=function(bC,bD,bE){var bF;bF=bC.s;bF==null?p.Obsolete(bE):bF!=null&&bF.$==2?(p.EnqueueSafe(bF.$1,bE),bD(bF.$0)):bF!=null&&bF.$==3?(bF.$0.push(bD),p.EnqueueSafe(bF.$1,bE)):bD(bF.$0);};p.MarkDone=function(bC,bD,bE){var bF;if(bF=bD.s,bF!=null&&bF.$==0)p.MarkForever(bC,bE);else p.MarkReady(bC,bE);};p.EnqueueSafe=function(bC,bD){var bE,bF,bG,bH;bC.push(bD);if(bC.length%20===0){bE=bC.slice(0);bh.Clear(bC);for(bF=0,bG=K.length(bE)-1;bF<=bG;bF++){bH=K.get(bE,bF);typeof bH=="object"?function(bI){if(bI.s)bC.push(bI);}(bH):function(bI){bC.push(bI);}(bH);}}else void 0;};p.MarkForever=function(bC,bD){var bE,bF,bG,bH;bE=bC.s;if(bE!=null&&bE.$==3){bC.s={$:0,$0:bD};bF=bE.$0;for(bG=0,bH=K.length(bF)-1;bG<=bH;bG++)(K.get(bF,bG))(bD);}else void 0;};p.MarkReady=function(bC,bD){var bE,bF,bG,bH;bE=bC.s;if(bE!=null&&bE.$==3){bC.s={$:2,$0:bD,$1:bE.$1};bF=bE.$0;for(bG=0,bH=K.length(bF)-1;bG<=bH;bG++)(K.get(bF,bG))(bD);}else void 0;};p.WhenRun=function(bC,bD,bE){var bF;bF=bC.s;bF==null?bE():bF!=null&&bF.$==2?(bF.$1.push(bE),bD(bF.$0)):bF!=null&&bF.$==3?(bF.$0.push(bD),bF.$1.push(bE)):bD(bF.$0);};p.Copy=function(bC){var bD,bE,bF;bD=bC.s;return bD==null?bC:bD!=null&&bD.$==2?(bE=p.New({$:2,$0:bD.$0,$1:[]}),(p.WhenObsolete(bC,bE),bE)):bD!=null&&bD.$==3?(bF=p.New({$:3,$0:[],$1:[]}),(p.When(bC,function(bG){p.MarkDone(bF,bC,bG);},bF),bF)):bC;};p.Map2Unit=function(bC,bD){var bE,bF,bG;function bH(){var bI,bJ,bK;if(!(bI=bG.s,bI!=null&&bI.$==0||bI!=null&&bI.$==2)){bJ=p.ValueAndForever(bC);bK=p.ValueAndForever(bD);bJ!=null&&bJ.$==1?bK!=null&&bK.$==1?bJ.$0[1]&&bK.$0[1]?p.MarkForever(bG,null):p.MarkReady(bG,null):void 0:void 0;}}bE=bC.s;bF=bD.s;return bE!=null&&bE.$==0?bF!=null&&bF.$==0?p.New({$:0,$0:null}):bD:bF!=null&&bF.$==0?bC:(bG=p.New({$:3,$0:[],$1:[]}),(p.When(bC,bH,bG),p.When(bD,bH,bG),bG));};p.WhenObsolete=function(bC,bD){var bE;bE=bC.s;bE==null?p.Obsolete(bD):bE!=null&&bE.$==2?p.EnqueueSafe(bE.$1,bD):bE!=null&&bE.$==3?p.EnqueueSafe(bE.$1,bD):void 0;};p.ValueAndForever=function(bC){var bD;bD=bC.s;return bD!=null&&bD.$==0?{$:1,$0:[bD.$0,true]}:bD!=null&&bD.$==2?{$:1,$0:[bD.$0,false]}:null;};q=g.AttrProxy=by.Class({},null,q);q.Create=function(bC,bD){return z.Static(function(bE){A.SetAttr(bE,bC,bD);});};q.Concat=function(bC){var bD;bD=R.ofSeqNonCopying(bC);return R.TreeReduce(z.EmptyAttr(),q.Append,bD);};q.Append=function(bC,bD){return z.AppendTree(bC,bD);};r.OnAfterRender=function(bC){return new q({$:4,$0:bC});};s=g.Doc=by.Class({},f,s);s.TextNode=function(bC){return s.Mk({$:5,$0:A.CreateText(bC)},B.Const());};s.TextView=function(bC){var bD;bD=C.CreateTextNode();return s.Mk({$:4,$0:bD},B.Map(function(bE){C.UpdateTextNode(bD,bE);},bC));};s.RunById=function(bC,bD){var bE;bE=A.Doc().getElementById(bC);I.Equals(bE,null)?i.FailWith("invalid id: "+bC):s.Run(bE,bD);};s.Element=function(bC,bD,bE){var bF,bG;bF=q.Concat(bD);bG=s.Concat(bE);return Q.New(A.CreateElement(bC),bF,bG);};s.Mk=function(bC,bD){return new s.New(bC,bD);};s.Run=function(bC,bD){C.LinkElement(bC,bD.docNode);s.RunInPlace(false,bC,bD);};s.Concat=function(bC){var bD;bD=R.ofSeqNonCopying(bC);return R.TreeReduce(s.get_Empty(),s.Append,bD);};s.RunInPlace=function(bC,bD,bE){var bF;bF=C.CreateRunState(bD,bE.docNode);B.Sink(_0.get_UseAnimations()||_1.BatchUpdatesEnabled()?_2.StartProcessor(C.PerformAnimatedUpdate(bC,bF,bE.docNode)):function(){C.PerformSyncUpdate(bC,bF,bE.docNode);},bE.updates);};s.Append=function(bC,bD){return s.Mk({$:0,$0:bC.docNode,$1:bD.docNode},B.Map2Unit(bC.updates,bD.updates));};s.get_Empty=function(){return s.Mk(null,B.Const());};s.New=by.Ctor(function(bC,bD){f.New.call(this);this.docNode=bC;this.updates=bD;},s);u.NewFromSeq=function(bC){var bD,bE,bF;bD={};bE=Y.Get(bC);try{while(bE.MoveNext()){bF=bE.Current();bD[bF[0]]=bF[1];}}finally{if(typeof bE=="object"&&"Dispose"in bE)bE.Dispose();}return bD;};w.LoadLocalTemplates=function(bC){!w.LocalTemplatesLoaded()?(w.set_LocalTemplatesLoaded(true),w.LoadNestedTemplates(self.document.body,"")):void 0;w.LoadedTemplates().set_Item(bC,w.LoadedTemplateFile(""));};w.LocalTemplatesLoaded=function(){J.$cctor();return J.LocalTemplatesLoaded;};w.set_LocalTemplatesLoaded=function(bC){J.$cctor();J.LocalTemplatesLoaded=bC;};w.LoadNestedTemplates=function(bC,bD){var bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS;function bE(bT){var bU,bV;if(!bF.ContainsKey(bT)){bU=(bV=null,[bG.TryGetValue(bT,{get:function(){return bV;},set:function(bW){bV=bW;}}),bV]);bU[0]?(bS.Add(bT),bG.Remove(bT),w.PrepareTemplateStrict(bD,{$:1,$0:bT},bU[1][0],{$:1,$0:bU[1][1]},{$:1,$0:bE})):bz.warn(bS.Contains(bT)?"Encountered loop when instantiating "+bT:"Local template does not exist: "+bT);}}bF=w.LoadedTemplateFile(bD);bG=new H.New$5();bH=bC.querySelectorAll("[ws-template]");for(bI=0,bJ=bH.length-1;bI<=bJ;bI++){bK=bH[bI];bL=bK.getAttribute("ws-template").toLowerCase();bK.removeAttribute("ws-template");bG.set_Item(bL,[[bK],w.FakeRootSingle(bK)]);}bM=bC.querySelectorAll("[ws-children-template]");for(bN=0,bO=bM.length-1;bN<=bO;bN++){bP=bM[bN];bQ=bP.getAttribute("ws-children-template").toLowerCase();bP.removeAttribute("ws-children-template");bG.set_Item(bQ,(bR=A.ChildrenArray(bP),[bR,w.FakeRoot(bR)]));}bS=new L.New$3();while(bG.count>0)bE(M.head(bG.get_Keys()));};w.LoadedTemplates=function(){J.$cctor();return J.LoadedTemplates;};w.LoadedTemplateFile=function(bC){var bD,bE,bF;bD=(bE=null,[w.LoadedTemplates().TryGetValue(bC,{get:function(){return bE;},set:function(bG){bE=bG;}}),bE]);return bD[0]?bD[1]:(bF=new H.New$5(),(w.LoadedTemplates().set_Item(bC,bF),bF));};w.FakeRootSingle=function(bC){var bD,bE,bF;bC.removeAttribute("ws-template");bD=bC.getAttribute("ws-replace");bD===null?void 0:(bC.removeAttribute("ws-replace"),bE=bC.parentNode,I.Equals(bE,null)?void 0:(bF=self.document.createElement(bC.tagName),bF.setAttribute("ws-replace",bD),bE.replaceChild(bF,bC)));return w.FakeRoot([bC]);};w.FakeRoot=function(bC){var bD,bE,bF;bD=self.document.createElement("div");for(bE=0,bF=bC.length-1;bE<=bF;bE++)bD.appendChild(K.get(bC,bE));return bD;};w.PrepareTemplateStrict=function(bC,bD,bE,bF,bG){var bH,bI;function bJ(bO,bP){var bQ,bR,bS,bT,bU,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce;function bV(cf){}while(true)switch(bO){case 0:if(bP!==null){bQ=bP.nextSibling;if(I.Equals(bP.nodeType,E.TEXT_NODE))W.convertTextNode(bP);else if(I.Equals(bP.nodeType,E.ELEMENT_NODE))bL(bP);bP=bQ;}else return null;break;case 1:bW=X.string(bP.nodeName,{$:1,$0:3},null).toLowerCase();bX=(bR=bW.indexOf("."),bR===-1?[bC,bW]:[X.string(bW,null,{$:1,$0:bR-1}),X.string(bW,{$:1,$0:bR+1},null)]);bY=bX[1];bZ=bX[0];if(bZ!==""&&!w.LoadedTemplates().ContainsKey(bZ))return W.failNotLoaded(bY);else{if(bZ===""&&bG!=null)bG.$0(bY);b0=w.LoadedTemplates().get_Item(bZ);if(!b0.ContainsKey(bY))return W.failNotLoaded(bY);else{b1=b0.get_Item(bY);b2=b1.cloneNode(true);b3=new L.New$3();b4=new H.New$5();b5=bP.attributes;for(b6=0,b7=b5.length-1;b6<=b7;b6++){b8=b5.item(b6).name.toLowerCase();b4.set_Item(b8,(b9=b5.item(b6).nodeValue,b9===""?b8:b9.toLowerCase()));!b3.Add(b8)?bz.warn("Hole mapped twice",b8):void 0;}for(b_=0,b$=bP.childNodes.length-1;b_<=b$;b_++){ca=bP.childNodes[b_];I.Equals(ca.nodeType,E.ELEMENT_NODE)?!b3.Add(ca.nodeName.toLowerCase())?bz.warn("Hole filled twice",bY):void 0:void 0;}cb=bP.childNodes.length===1&&I.Equals(bP.firstChild.nodeType,E.TEXT_NODE);if(cb){bT=W.fillTextHole(b2,bP.firstChild.textContent,bY);((function(cf){return function(cg){if(cg!=null)cf(cg.$0);};}((bU=function(cf){return function(cg){return cf.Add(cg);};}(b3),function(cf){return bV(bU(cf));})))(bT));}W.removeHolesExcept(b2,b3);if(!cb){for(cc=0,cd=bP.childNodes.length-1;cc<=cd;cc++){ce=bP.childNodes[cc];I.Equals(ce.nodeType,E.ELEMENT_NODE)?ce.hasAttributes()?W.fillInstanceAttrs(b2,ce):bK(b2,ce):void 0;}}W.mapHoles(b2,b4);W.fill(b2,bP.parentNode,bP);bP.parentNode.removeChild(bP);return;}}break;}}function bK(bO,bP){var bQ,bS,bT;function bR(bU,bV){var bW,bX,bY;if(bS==="title"&&bP.hasChildNodes()){bW=bA.parseHTML(bP.textContent);bP.removeChild(bP.firstChild);for(bX=0,bY=bW.length-1;bX<=bY;bX++)bP.appendChild(K.get(bW,bX));}else null;bL(bP);return W.fill(bP,bU,bV);}bS=bP.nodeName.toLowerCase();A.IterSelector(bO,"[ws-attr-holes]",function(bU){var bV,bW,bX,bY,bZ;bV=_8.SplitChars(bU.getAttribute("ws-attr-holes"),[" "],1);for(bW=0,bX=bV.length-1;bW<=bX;bW++){bY=K.get(bV,bW);bU.setAttribute(bY,(bZ=new a.RegExp("\\${"+bS+"}","ig"),bU.getAttribute(bY).replace(bZ,bP.textContent)));}});bT=bO.querySelector("[ws-hole="+bS+"]");if(I.Equals(bT,null)){bQ=bO.querySelector("[ws-replace="+bS+"]");return I.Equals(bQ,null)?null:(bR(bQ.parentNode,bQ),void bQ.parentNode.removeChild(bQ));}else{while(bT.hasChildNodes())bT.removeChild(bT.lastChild);bT.removeAttribute("ws-hole");return bR(bT,null);}}function bL(bO){if(_8.StartsWith(bO.nodeName.toLowerCase(),"ws-"))bN(bO);else{W.convertAttrs(bO);bM(bO.firstChild);}}function bM(bO){return bJ(0,bO);}function bN(bO){return bJ(1,bO);}bH=bF==null?w.FakeRoot(bE):bF.$0;bI=(bD==null?"":bD.$0).toLowerCase();w.LoadedTemplateFile(bC).set_Item(bI,bH);K.length(bE)>0?(function(bO){var bP,bQ,bR,bS;while(true){bP=bO.querySelector("[ws-template]");if(I.Equals(bP,null)){bQ=bO.querySelector("[ws-children-template]");if(I.Equals(bQ,null))return null;else{bR=bQ.getAttribute("ws-children-template");bQ.removeAttribute("ws-children-template");w.PrepareTemplateStrict(bC,{$:1,$0:bR},A.ChildrenArray(bQ),null,null);bO=bO;}}else{bS=bP.getAttribute("ws-template");(w.PrepareSingleTemplate(bC,{$:1,$0:bS},bP))(null);bO=bO;}}}(bH),bM(K.get(bE,0))):void 0;};w.PrepareSingleTemplate=function(bC,bD,bE){var bF,bG,bH;bF=w.FakeRootSingle(bE);bG=[bE];bH={$:1,$0:bF};return function(bI){w.PrepareTemplateStrict(bC,bD,bG,bH,bI);};};w.TextHoleRE=function(){J.$cctor();return J.TextHoleRE;};y.Int=function(){y.set_counter(y.counter()+1);return y.counter();};y.set_counter=function(bC){P.$cctor();P.counter=bC;};y.counter=function(){P.$cctor();return P.counter;};z.Static=function(bC){return new q({$:3,$0:bC});};z.Updates=function(bC){return R.MapTreeReduce(function(bD){return bD.NChanged();},B.Const(),B.Map2Unit,bC.DynNodes);};z.AppendTree=function(bC,bD){var bE;return bC===null?bD:bD===null?bC:(bE=new q({$:2,$0:bC,$1:bD}),(z.SetFlags(bE,z.Flags(bC)|z.Flags(bD)),bE));};z.EmptyAttr=function(){bc.$cctor();return bc.EmptyAttr;};z.Insert=function(bC,bD){var bE,bF,bG;function bH(bI){if(!(bI===null))if(bI!=null&&bI.$==1)bE.push(bI.$0);else if(bI!=null&&bI.$==2){bH(bI.$0);bH(bI.$1);}else if(bI!=null&&bI.$==3)bI.$0(bC);else if(bI!=null&&bI.$==4)bF.push(bI.$0);}bE=[];bF=[];bH(bD);bG=bE.slice(0);return _7.New(bC,z.Flags(bD),bG,bF.length===0?null:{$:1,$0:function(bI){M.iter(function(bJ){bJ(bI);},bF);}});};z.SetFlags=function(bC,bD){bC.flags=bD;};z.Flags=function(bC){return bC!==null&&bC.hasOwnProperty("flags")?bC.flags:0;};z.HasExitAnim=function(bC){var bD;bD=2;return(bC.DynFlags&bD)===bD;};z.GetExitAnim=function(bC){return z.GetAnim(bC,function(bD,bE){return bD.NGetExitAnim(bE);});};z.HasEnterAnim=function(bC){var bD;bD=1;return(bC.DynFlags&bD)===bD;};z.GetEnterAnim=function(bC){return z.GetAnim(bC,function(bD,bE){return bD.NGetEnterAnim(bE);});};z.HasChangeAnim=function(bC){var bD;bD=4;return(bC.DynFlags&bD)===bD;};z.GetChangeAnim=function(bC){return z.GetAnim(bC,function(bD,bE){return bD.NGetChangeAnim(bE);});};z.GetAnim=function(bC,bD){return _0.Concat(K.map(function(bE){return bD(bE,bC.DynElem);},bC.DynNodes));};z.Sync=function(bC,bD){K.iter(function(bE){bE.NSync(bC);},bD.DynNodes);};A.SetAttr=function(bC,bD,bE){bC.setAttribute(bD,bE);};A.CreateText=function(bC){return A.Doc().createTextNode(bC);};A.Doc=function(){O.$cctor();return O.Doc;};A.CreateElement=function(bC){return A.Doc().createElement(bC);};A.ChildrenArray=function(bC){var bD,bE,bF;bD=[];for(bE=0,bF=bC.childNodes.length-1;bE<=bF;bE++)bD.push(bC.childNodes[bE]);return bD;};A.IterSelector=function(bC,bD,bE){var bF,bG,bH;bF=bC.querySelectorAll(bD);for(bG=0,bH=bF.length-1;bG<=bH;bG++)bE(bF[bG]);};A.InsertAt=function(bC,bD,bE){var bF;if(!(bE.parentNode===bC&&bD===(bF=bE.nextSibling,I.Equals(bF,null)?null:bF)))bC.insertBefore(bE,bD);};A.RemoveNode=function(bC,bD){if(bD.parentNode===bC)bC.removeChild(bD);};B.Const=function(bC){var bD;bD=p.New({$:0,$0:bC});return function(){return bD;};};B.Map=function(bC,bD){return B.CreateLazy(function(){return p.Map(bC,bD());});};B.CreateLazy=function(bC){var bD;bD={c:null,o:bC};return function(){var bE,bF;bE=bD.c;return bE===null?(bE=bD.o(),bD.c=bE,(bF=bE.s,bF!=null&&bF.$==0)?bD.o=null:p.WhenObsoleteRun(bE,function(){bD.c=null;}),bE):bE;};};B.Sink=function(bC,bD){function bE(){p.WhenRun(bD(),bC,function(){bf.scheduler().Fork(bE);});}bf.scheduler().Fork(bE);};B.Map2Unit=function(bC,bD){return B.CreateLazy(function(){return p.Map2Unit(bC(),bD());});};C.CreateTextNode=function(){return{Text:A.CreateText(""),Dirty:false,Value:""};};C.UpdateTextNode=function(bC,bD){bC.Value=bD;bC.Dirty=true;};C.LinkElement=function(bC,bD){C.InsertDoc(bC,bD,null);};C.InsertDoc=function(bC,bD,bE){var bF;return bD!=null&&bD.$==1?C.InsertNode(bC,bD.$0.El,bE):bD!=null&&bD.$==2?(bF=bD.$0,(bF.Dirty=false,C.InsertDoc(bC,bF.Current,bE))):bD==null?bE:bD!=null&&bD.$==4?C.InsertNode(bC,bD.$0.Text,bE):bD!=null&&bD.$==5?C.InsertNode(bC,bD.$0,bE):bD!=null&&bD.$==6?K.foldBack(function(bG,bH){return bG==null||bG.constructor===V?C.InsertDoc(bC,bG,bH):C.InsertNode(bC,bG,bH);},bD.$0.Els,bE):C.InsertDoc(bC,bD.$0,C.InsertDoc(bC,bD.$1,bE));};C.CreateRunState=function(bC,bD){return _.New($.get_Empty(),C.CreateElemNode(bC,z.EmptyAttr(),bD));};C.PerformAnimatedUpdate=function(bC,bD,bE){var bF;return _0.get_UseAnimations()?(bF=null,bf.Delay(function(){var bG,bH,bI;bG=$.FindAll(bE);bH=C.ComputeChangeAnim(bD,bG);bI=C.ComputeEnterAnim(bD,bG);return bf.Bind(_0.Play(_0.Append(bH,C.ComputeExitAnim(bD,bG))),function(){return bf.Bind(C.SyncElemNodesNextFrame(bC,bD),function(){return bf.Bind(_0.Play(bI),function(){bD.PreviousNodes=bG;return bf.Return(null);});});});})):C.SyncElemNodesNextFrame(bC,bD);};C.PerformSyncUpdate=function(bC,bD,bE){var bF;bF=$.FindAll(bE);C.SyncElemNode(bC,bD.Top);bD.PreviousNodes=bF;};C.CreateElemNode=function(bC,bD,bE){var bF;C.LinkElement(bC,bE);bF=z.Insert(bC,bD);return S.New(bF,bE,null,bC,y.Int(),by.GetOptional(bF.OnAfterRender));};C.InsertNode=function(bC,bD,bE){A.InsertAt(bC,bE,bD);return bD;};C.SyncElemNodesNextFrame=function(bC,bD){function bE(bF){a.requestAnimationFrame(function(){C.SyncElemNode(bC,bD.Top);bF();});}return _1.BatchUpdatesEnabled()?bf.FromContinuations(function(bF,bG,bH){return bE.apply(null,[bF,bG,bH]);}):(C.SyncElemNode(bC,bD.Top),bf.Return(null));};C.ComputeExitAnim=function(bC,bD){return _0.Concat(K.map(function(bE){return z.GetExitAnim(bE.Attr);},$.ToArray($.Except(bD,$.Filter(function(bE){return z.HasExitAnim(bE.Attr);},bC.PreviousNodes)))));};C.ComputeEnterAnim=function(bC,bD){return _0.Concat(K.map(function(bE){return z.GetEnterAnim(bE.Attr);},$.ToArray($.Except(bC.PreviousNodes,$.Filter(function(bE){return z.HasEnterAnim(bE.Attr);},bD)))));};C.ComputeChangeAnim=function(bC,bD){var bE;function bF(bG){return z.HasChangeAnim(bG.Attr);}bE=function(bG){return $.Filter(bF,bG);};return _0.Concat(K.map(function(bG){return z.GetChangeAnim(bG.Attr);},$.ToArray($.Intersect(bE(bC.PreviousNodes),bE(bD)))));};C.SyncElemNode=function(bC,bD){!bC?C.SyncElement(bD):void 0;C.Sync(bD.Children);C.AfterRender(bD);};C.SyncElement=function(bC){function bD(bE){function bF(bG){var bH,bI;return bG!=null&&bG.$==0?bF(bG.$0)||bF(bG.$1):bG!=null&&bG.$==2?(bH=bG.$0,bH.Dirty||bF(bH.Current)):bG!=null&&bG.$==6&&(bI=bG.$0,bI.Dirty||K.exists(bD,bI.Holes));}return bF(bE.Children);}z.Sync(bC.El,bC.Attr);bD(bC)?C.DoSyncElement(bC):void 0;};C.Sync=function(bC){var bD,bE;if(bC!=null&&bC.$==1)C.SyncElemNode(false,bC.$0);else if(bC!=null&&bC.$==2)C.Sync(bC.$0.Current);else if(bC==null);else if(bC!=null&&bC.$==5);else if(bC!=null&&bC.$==4){bD=bC.$0;bD.Dirty?(bD.Text.nodeValue=bD.Value,bD.Dirty=false):void 0;}else if(bC!=null&&bC.$==6){bE=bC.$0;K.iter(function(bF){C.SyncElemNode(false,bF);},bE.Holes);K.iter(function(bF){z.Sync(bF[0],bF[1]);},bE.Attrs);C.AfterRender(bE);}else{C.Sync(bC.$0);C.Sync(bC.$1);}};C.AfterRender=function(bC){var bD;bD=by.GetOptional(bC.Render);bD!=null&&bD.$==1?(bD.$0(bC.El),by.SetOptional(bC,"Render",null)):void 0;};C.DoSyncElement=function(bC){var bD,bE,bF;function bG(bH,bI){var bJ,bK;return bH!=null&&bH.$==1?bH.$0.El:bH!=null&&bH.$==2?(bJ=bH.$0,bJ.Dirty?(bJ.Dirty=false,C.InsertDoc(bD,bJ.Current,bI)):bG(bJ.Current,bI)):bH==null?bI:bH!=null&&bH.$==4?bH.$0.Text:bH!=null&&bH.$==5?bH.$0:bH!=null&&bH.$==6?(bK=bH.$0,(bK.Dirty?bK.Dirty=false:void 0,K.foldBack(function(bL,bM){return bL==null||bL.constructor===V?bG(bL,bM):bL;},bK.Els,bI))):bG(bH.$0,bG(bH.$1,bI));}bD=bC.El;bq.Iter((bE=bC.El,function(bH){A.RemoveNode(bE,bH);}),bq.Except(bq.DocChildren(bC),bq.Children(bC.El,by.GetOptional(bC.Delimiters))));bG(bC.Children,(bF=by.GetOptional(bC.Delimiters),bF!=null&&bF.$==1?bF.$0[1]:null));};F.GetFieldValues=function(bC){var bD,bE;bD=[];for(var bF in bC)bD.push(bC[bF]);return bD;};H=G.Dictionary=by.Class({set_Item:function(bC,bD){this.set(bC,bD);},ContainsKey:function(bC){var bD,bE;bD=this;bE=this.data[this.hash(bC)];return bE==null?false:K.exists(function(bF){return bD.equals.apply(null,[(i.KeyValue(bF))[0],bC]);},bE);},TryGetValue:function(bC,bD){var bE,bF,bG;bE=this;bF=this.data[this.hash(bC)];return bF==null?false:(bG=K.tryPick(function(bH){var bI;bI=i.KeyValue(bH);return bE.equals.apply(null,[bI[0],bC])?{$:1,$0:bI[1]}:null;},bF),bG!=null&&bG.$==1&&(bD.set(bG.$0),true));},Remove:function(bC){return this.remove(bC);},get_Keys:function(){return new Z.New(this);},set:function(bC,bD){var bE,bF,bG,bH;bE=this;bF=this.hash(bC);bG=this.data[bF];bG==null?(this.count=this.count+1,this.data[bF]=new a.Array({K:bC,V:bD})):(bH=K.tryFindIndex(function(bI){return bE.equals.apply(null,[(i.KeyValue(bI))[0],bC]);},bG),bH==null?(this.count=this.count+1,bG.push({K:bC,V:bD})):bG[bH.$0]={K:bC,V:bD});},remove:function(bC){var bD,bE,bF,bG;bD=this;bE=this.hash(bC);bF=this.data[bE];return bF==null?false:(bG=K.filter(function(bH){return!bD.equals.apply(null,[(i.KeyValue(bH))[0],bC]);},bF),K.length(bG)<bF.length&&(this.count=this.count-1,this.data[bE]=bG,true));},get_Item:function(bC){return this.get(bC);},get:function(bC){var bD,bE;bD=this;bE=this.data[this.hash(bC)];return bE==null?U.notPresent():K.pick(function(bF){var bG;bG=i.KeyValue(bF);return bD.equals.apply(null,[bG[0],bC])?{$:1,$0:bG[1]}:null;},bE);},GetEnumerator:function(){return Y.Get0(this);},GetEnumerator0:function(){return Y.Get0(K.concat(F.GetFieldValues(this.data)));}},f,H);H.New$5=by.Ctor(function(){H.New$6.call(this,[],I.Equals,I.Hash);},H);H.New$6=by.Ctor(function(bC,bD,bE){var bF,bG;f.New.call(this);this.equals=bD;this.hash=bE;this.count=0;this.data=[];bF=Y.Get(bC);try{while(bF.MoveNext()){bG=bF.Current();this.set(bG.K,bG.V);}}finally{if(typeof bF=="object"&&"Dispose"in bF)bF.Dispose();}},H);I.Equals=function(bC,bD){var bE,bF,bG,bH;if(bC===bD)return true;else{bE=typeof bC;if(bE=="object"){if(bC===null||bC===void 0||bD===null||bD===void 0)return false;else if("Equals"in bC)return bC.Equals(bD);else if(bC instanceof a.Array&&bD instanceof a.Array)return I.arrayEquals(bC,bD);else if(bC instanceof a.Date&&bD instanceof a.Date)return I.dateEquals(bC,bD);else{bF=[true];for(var bI in bC)if(function(bJ){bF[0]=!bC.hasOwnProperty(bJ)||bD.hasOwnProperty(bJ)&&I.Equals(bC[bJ],bD[bJ]);return!bF[0];}(bI))break;if(bF[0]){for(var bJ in bD)if(function(bK){bF[0]=!bD.hasOwnProperty(bK)||bC.hasOwnProperty(bK);return!bF[0];}(bJ))break;}return bF[0];}}else return bE=="function"&&("$Func"in bC?bC.$Func===bD.$Func&&bC.$Target===bD.$Target:"$Invokes"in bC&&"$Invokes"in bD&&I.arrayEquals(bC.$Invokes,bD.$Invokes));}};I.arrayEquals=function(bC,bD){var bE,bF;if(K.length(bC)===K.length(bD)){bE=true;bF=0;while(bE&&bF<K.length(bC)){!I.Equals(K.get(bC,bF),K.get(bD,bF))?bE=false:void 0;bF=bF+1;}return bE;}else return false;};I.dateEquals=function(bC,bD){return bC.getTime()===bD.getTime();};I.Hash=function(bC){var bD;bD=typeof bC;return bD=="function"?0:bD=="boolean"?bC?1:0:bD=="number"?bC:bD=="string"?I.hashString(bC):bD=="object"?bC==null?0:bC instanceof a.Array?I.hashArray(bC):I.hashObject(bC):0;};I.hashString=function(bC){var bD,bE,bF;if(bC===null)return 0;else{bD=5381;for(bE=0,bF=bC.length-1;bE<=bF;bE++)bD=I.hashMix(bD,bC[bE].charCodeAt());return bD;}};I.hashArray=function(bC){var bD,bE,bF;bD=-34948909;for(bE=0,bF=K.length(bC)-1;bE<=bF;bE++)bD=I.hashMix(bD,I.Hash(K.get(bC,bE)));return bD;};I.hashObject=function(bC){var bD,bE;if("GetHashCode"in bC)return bC.GetHashCode();else{bD=[0];for(var bF in bC)if(function(bG){bD[0]=I.hashMix(I.hashMix(bD[0],I.hashString(bG)),I.Hash(bC[bG]));return false;}(bF))break;return bD[0];}};I.hashMix=function(bC,bD){return(bC<<5)+bC+bD;};I.Compare=function(bC,bD){var bE,bF,bG,bH,bI,bJ;if(bC===bD)return 0;else{bF=typeof bC;switch(bF=="function"?1:bF=="boolean"?2:bF=="number"?2:bF=="string"?2:bF=="object"?3:0){case 0:return typeof bD=="undefined"?0:-1;case 1:return i.FailWith("Cannot compare function values.");case 2:return bC<bD?-1:1;case 3:if(bC===null)bG=-1;else if(bD===null)bG=1;else if("CompareTo"in bC)bG=bC.CompareTo(bD);else if("CompareTo0"in bC)bG=bC.CompareTo0(bD);else if(bC instanceof a.Array&&bD instanceof a.Array)bG=I.compareArrays(bC,bD);else if(bC instanceof a.Date&&bD instanceof a.Date)bG=I.compareDates(bC,bD);else{bH=[0];for(var bK in bC)if(function(bL){return!bC.hasOwnProperty(bL)?false:!bD.hasOwnProperty(bL)?(bH[0]=1,true):(bH[0]=I.Compare(bC[bL],bD[bL]),bH[0]!==0);}(bK))break;if(bH[0]===0){for(var bL in bD)if(function(bM){return!bD.hasOwnProperty(bM)?false:!bC.hasOwnProperty(bM)&&(bH[0]=-1,true);}(bL))break;}bG=bH[0];}return bG;}}};I.compareArrays=function(bC,bD){var bE,bF;if(K.length(bC)<K.length(bD))return -1;else if(K.length(bC)>K.length(bD))return 1;else{bE=0;bF=0;while(bE===0&&bF<K.length(bC)){bE=I.Compare(K.get(bC,bF),K.get(bD,bF));bF=bF+1;}return bE;}};I.compareDates=function(bC,bD){return I.Compare(bC.getTime(),bD.getTime());};p.Obsolete=function(bC){var bD,bE,bF,bG,bH;bE=bC.s;if(bE==null||(bE!=null&&bE.$==2?(bD=bE.$1,false):bE!=null&&bE.$==3?(bD=bE.$1,false):true))void 0;else{bC.s=null;for(bF=0,bG=K.length(bD)-1;bF<=bG;bF++){bH=K.get(bD,bF);typeof bH=="object"?function(bI){p.Obsolete(bI);}(bH):bH();}}};p.New=function(bC){return{s:bC};};B=g.View=by.Class({},null,B);J.$cctor=function(){J.$cctor=a.ignore;J.LoadedTemplates=new H.New$5();J.LocalTemplatesLoaded=false;J.TextHoleRE="\\${([^}]+)}";};K.get=function(bC,bD){K.checkBounds(bC,bD);return bC[bD];};K.checkBounds=function(bC,bD){if(bD<0||bD>=bC.length)i.FailWith("Index was outside the bounds of the array.");};K.length=function(bC){return bC.dims===2?bC.length*bC.length:bC.length;};K.set=function(bC,bD,bE){K.checkBounds(bC,bD);bC[bD]=bE;};L=G.HashSet=by.Class({Add:function(bC){return this.add(bC);},Contains:function(bC){var bD;bD=this.data[this.hash(bC)];return bD==null?false:this.arrContains(bC,bD);},add:function(bC){var bD,bE;bD=this.hash(bC);bE=this.data[bD];return bE==null?(this.data[bD]=[bC],this.count=this.count+1,true):this.arrContains(bC,bE)?false:(bE.push(bC),this.count=this.count+1,true);},arrContains:function(bC,bD){var bE,bF,bG,bH;bE=true;bF=0;bH=bD.length;while(bE&&bF<bH)if(this.equals.apply(null,[bD[bF],bC]))bE=false;else bF=bF+1;return!bE;},ExceptWith:function(bC){var bD;bD=Y.Get(bC);try{while(bD.MoveNext())this.Remove(bD.Current());}finally{if(typeof bD=="object"&&"Dispose"in bD)bD.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bC){var bD,bE,bF,bG;bD=0;bE=bn.concat(this.data);for(bF=0,bG=bE.length-1;bF<=bG;bF++)K.set(bC,bF,bE[bF]);},IntersectWith:function(bC){var bD,bE,bF,bG,bH;bD=new L.New$4(bC,this.equals,this.hash);bE=bn.concat(this.data);for(bF=0,bG=bE.length-1;bF<=bG;bF++){bH=bE[bF];!bD.Contains(bH)?this.Remove(bH):void 0;}},Remove:function(bC){var bD;bD=this.data[this.hash(bC)];return bD==null?false:this.arrRemove(bC,bD)&&(this.count=this.count-1,true);},arrRemove:function(bC,bD){var bE,bF,bG,bH;bE=true;bF=0;bH=bD.length;while(bE&&bF<bH)if(this.equals.apply(null,[bD[bF],bC])){bD.splice.apply(bD,[bF,1]);bE=false;}else bF=bF+1;return!bE;},GetEnumerator:function(){return Y.Get(bn.concat(this.data));},GetEnumerator0:function(){return Y.Get(bn.concat(this.data));}},f,L);L.New$3=by.Ctor(function(){L.New$4.call(this,[],I.Equals,I.Hash);},L);L.New$4=by.Ctor(function(bC,bD,bE){var bF;f.New.call(this);this.equals=bD;this.hash=bE;this.data=[];this.count=0;bF=Y.Get(bC);try{while(bF.MoveNext())this.add(bF.Current());}finally{if(typeof bF=="object"&&"Dispose"in bF)bF.Dispose();}},L);L.New$2=by.Ctor(function(bC){L.New$4.call(this,bC,I.Equals,I.Hash);},L);M.head=function(bC){var bD;bD=Y.Get(bC);try{return bD.MoveNext()?bD.Current():M.insufficient();}finally{if(typeof bD=="object"&&"Dispose"in bD)bD.Dispose();}};M.fold=function(bC,bD,bE){var bF,bG;bF=bD;bG=Y.Get(bE);try{while(bG.MoveNext())bF=bC(bF,bG.Current());return bF;}finally{if(typeof bG=="object"&&"Dispose"in bG)bG.Dispose();}};M.iter=function(bC,bD){var bE;bE=Y.Get(bD);try{while(bE.MoveNext())bC(bE.Current());}finally{if(typeof bE=="object"&&"Dispose"in bE)bE.Dispose();}};M.map=function(bC,bD){return{GetEnumerator:function(){var bE;bE=Y.Get(bD);return new bd.New(null,null,function(bF){return bE.MoveNext()&&(bF.c=bC(bE.Current()),true);},function(){bE.Dispose();});}};};M.max=function(bC){var bD,bE,bF;bD=Y.Get(bC);try{if(!bD.MoveNext())M.seqEmpty();bE=bD.Current();while(bD.MoveNext()){bF=bD.Current();I.Compare(bF,bE)===1?bE=bF:void 0;}return bE;}finally{if(typeof bD=="object"&&"Dispose"in bD)bD.Dispose();}};M.seqEmpty=function(){return i.FailWith("The input sequence was empty.");};O.$cctor=function(){O.$cctor=a.ignore;O.Doc=self.document;};P.$cctor=function(){P.$cctor=a.ignore;P.counter=0;};Q=g.Elt=by.Class({},s,Q);Q.New=function(bC,bD,bE){var bF,bG;bF=C.CreateElemNode(bC,bD,bE.docNode);bG=_3.Create(bE.updates);return new Q.New$1({$:1,$0:bF},B.Map2Unit(z.Updates(bF.Attr),bG.v),bC,bG);};Q.New$1=by.Ctor(function(bC,bD,bE,bF){s.New.call(this,bC,bD);this.docNode$1=bC;this.updates$1=bD;this.elt=bE;this.rvUpdates=bF;},Q);R.ofSeqNonCopying=function(bC){var bD,bE;if(bC instanceof a.Array)return bC;else if(bC instanceof _5)return K.ofList(bC);else if(bC===null)return[];else{bD=[];bE=Y.Get(bC);try{while(bE.MoveNext())bD.push(bE.Current());return bD;}finally{if(typeof bE=="object"&&"Dispose"in bE)bE.Dispose();}}};R.TreeReduce=function(bC,bD,bE){var bF;function bG(bH,bI){var bJ,bK;return bI<=0?bC:bI===1&&(bH>=0&&bH<bF)?K.get(bE,bH):(bK=bI/2>>0,bD(bG(bH,bK),bG(bH+bK,bI-bK)));}bF=K.length(bE);return bG(0,bF);};R.MapTreeReduce=function(bC,bD,bE,bF){var bG;function bH(bI,bJ){var bK,bL;return bJ<=0?bD:bJ===1&&(bI>=0&&bI<bG)?bC(K.get(bF,bI)):(bL=bJ/2>>0,bE(bH(bI,bL),bH(bI+bL,bJ-bL)));}bG=K.length(bF);return bH(0,bG);};S=g.DocElemNode=by.Class({Equals:function(bC){return this.ElKey===bC.ElKey;},GetHashCode:function(){return this.ElKey;}},null,S);S.New=function(bC,bD,bE,bF,bG,bH){var bI;return new S((bI={Attr:bC,Children:bD,El:bF,ElKey:bG},(by.SetOptional(bI,"Delimiters",bE),by.SetOptional(bI,"Render",bH),bI)));};U.notPresent=function(){return i.FailWith("The given key was not present in the dictionary.");};K.exists=function(bC,bD){var bE,bF,bG,bH;bE=false;bF=0;bH=K.length(bD);while(!bE&&bF<bH)if(bC(bD[bF]))bE=true;else bF=bF+1;return bE;};K.tryPick=function(bC,bD){var bE,bF,bG;bE=null;bF=0;while(bF<bD.length&&bE==null){bG=bC(bD[bF]);bG!=null&&bG.$==1?bE=bG:void 0;bF=bF+1;}return bE;};K.tryFindIndex=function(bC,bD){var bE,bF;bE=null;bF=0;while(bF<bD.length&&bE==null){bC(bD[bF])?bE={$:1,$0:bF}:void 0;bF=bF+1;}return bE;};K.ofList=function(bC){var bD,bE;bE=[];bD=bC;while(!(bD.$==0)){bE.push(_4.head(bD));bD=_4.tail(bD);}return bE;};K.filter=function(bC,bD){var bE,bF,bG;bE=[];for(bF=0,bG=bD.length-1;bF<=bG;bF++)if(bC(bD[bF]))bE.push(bD[bF]);return bE;};K.map=function(bC,bD){var bE,bF,bG;bE=new a.Array(bD.length);for(bF=0,bG=bD.length-1;bF<=bG;bF++)bE[bF]=bC(bD[bF]);return bE;};K.iter=function(bC,bD){var bE,bF;for(bE=0,bF=bD.length-1;bE<=bF;bE++)bC(bD[bE]);};K.foldBack=function(bC,bD,bE){var bF,bG,bH,bI,bJ;bF=bE;bH=bD.length;for(bI=1,bJ=bH;bI<=bJ;bI++)bF=bC(bD[bH-bI],bF);return bF;};K.pick=function(bC,bD){var bE;bE=K.tryPick(bC,bD);return bE==null?i.FailWith("KeyNotFoundException"):bE.$0;};K.ofSeq=function(bC){var bD,bE;if(bC instanceof a.Array)return bC.slice();else if(bC instanceof _5)return K.ofList(bC);else{bD=[];bE=Y.Get(bC);try{while(bE.MoveNext())bD.push(bE.Current());return bD;}finally{if(typeof bE=="object"&&"Dispose"in bE)bE.Dispose();}}};K.choose=function(bC,bD){var bE,bF,bG,bH;bE=[];for(bF=0,bG=bD.length-1;bF<=bG;bF++){bH=bC(bD[bF]);bH==null?void 0:bE.push(bH.$0);}return bE;};K.concat=function(bC){return a.Array.prototype.concat.apply([],K.ofSeq(bC));};K.create=function(bC,bD){var bE,bF,bG;bE=new a.Array(bC);for(bF=0,bG=bC-1;bF<=bG;bF++)bE[bF]=bD;return bE;};K.init=function(bC,bD){var bE,bF,bG;bC<0?i.FailWith("Negative size given."):null;bE=new a.Array(bC);for(bF=0,bG=bC-1;bF<=bG;bF++)bE[bF]=bD(bF);return bE;};K.forall=function(bC,bD){var bE,bF,bG,bH;bE=true;bF=0;bH=K.length(bD);while(bE&&bF<bH)if(bC(bD[bF]))bF=bF+1;else bE=false;return bE;};W.convertTextNode=function(bC){var bD,bE,bF,bG,bH,bI;bD=null;bE=0;bG=bC.textContent;bH=new a.RegExp(w.TextHoleRE(),"g");while(bD=bH.exec(bG),bD!==null){bC.parentNode.insertBefore(self.document.createTextNode(X.string(bG,{$:1,$0:bE},{$:1,$0:bH.lastIndex-K.get(bD,0).length-1})),bC);bE=bH.lastIndex;bI=self.document.createElement("span");bI.setAttribute("ws-replace",K.get(bD,1).toLowerCase());bC.parentNode.insertBefore(bI,bC);}bH.lastIndex=0;bC.textContent=X.string(bG,{$:1,$0:bE},null);};W.failNotLoaded=function(bC){bz.warn("Instantiating non-loaded template",bC);};W.fillTextHole=function(bC,bD,bE){var bF;bF=bC.querySelector("[ws-replace]");return I.Equals(bF,null)?(bz.warn("Filling non-existent text hole",bE),null):(bF.parentNode.replaceChild(new a.Text(bD),bF),{$:1,$0:bF.getAttribute("ws-replace")});};W.removeHolesExcept=function(bC,bD){function bE(bF){A.IterSelector(bC,"["+bF+"]",function(bG){if(!bD.Contains(bG.getAttribute(bF)))bG.removeAttribute(bF);});}bE("ws-attr");bE("ws-onafterrender");bE("ws-var");A.IterSelector(bC,"[ws-hole]",function(bF){if(!bD.Contains(bF.getAttribute("ws-hole"))){bF.removeAttribute("ws-hole");while(bF.hasChildNodes())bF.removeChild(bF.lastChild);}});A.IterSelector(bC,"[ws-replace]",function(bF){if(!bD.Contains(bF.getAttribute("ws-replace")))bF.parentNode.removeChild(bF);});A.IterSelector(bC,"[ws-on]",function(bF){bF.setAttribute("ws-on",_8.concat(" ",K.filter(function(bG){return bD.Contains(K.get(_8.SplitChars(bG,[":"],1),1));},_8.SplitChars(bF.getAttribute("ws-on"),[" "],1))));});A.IterSelector(bC,"[ws-attr-holes]",function(bF){var bG,bH,bI,bJ,bK;bG=_8.SplitChars(bF.getAttribute("ws-attr-holes"),[" "],1);for(bH=0,bI=bG.length-1;bH<=bI;bH++){bJ=K.get(bG,bH);bF.setAttribute(bJ,(bK=new a.RegExp(w.TextHoleRE(),"g"),bF.getAttribute(bJ).replace(bK,function(bL,bM){return bD.Contains(bM)?bL:"";})));}});};W.fillInstanceAttrs=function(bC,bD){var bE,bF,bG,bH,bI;W.convertAttrs(bD);bE=bD.nodeName.toLowerCase();bF=bC.querySelector("[ws-attr="+bE+"]");if(I.Equals(bF,null))bz.warn("Filling non-existent attr hole",bE);else{bF.removeAttribute("ws-attr");for(bG=0,bH=bD.attributes.length-1;bG<=bH;bG++){bI=bD.attributes.item(bG);bI.name==="class"&&bF.hasAttribute("class")?bF.setAttribute("class",bF.getAttribute("class")+" "+bI.nodeValue):bF.setAttribute(bI.name,bI.nodeValue);}}};W.mapHoles=function(bC,bD){function bE(bF){A.IterSelector(bC,"["+bF+"]",function(bG){var bH,bI;bH=(bI=null,[bD.TryGetValue(bG.getAttribute(bF).toLowerCase(),{get:function(){return bI;},set:function(bJ){bI=bJ;}}),bI]);bH[0]?bG.setAttribute(bF,bH[1]):void 0;});}bE("ws-hole");bE("ws-replace");bE("ws-attr");bE("ws-onafterrender");bE("ws-var");A.IterSelector(bC,"[ws-on]",function(bF){bF.setAttribute("ws-on",_8.concat(" ",K.map(function(bG){var bH,bI,bJ;bH=_8.SplitChars(bG,[":"],1);bI=(bJ=null,[bD.TryGetValue(K.get(bH,1),{get:function(){return bJ;},set:function(bK){bJ=bK;}}),bJ]);return bI[0]?K.get(bH,0)+":"+bI[1]:bG;},_8.SplitChars(bF.getAttribute("ws-on"),[" "],1))));});A.IterSelector(bC,"[ws-attr-holes]",function(bF){var bG,bH,bI;bG=_8.SplitChars(bF.getAttribute("ws-attr-holes"),[" "],1);for(bH=0,bI=bG.length-1;bH<=bI;bH++)(function(){var bJ;function bK(bL,bM){var bN;bN=i.KeyValue(bM);return bL.replace(new a.RegExp("\\${"+bN[0]+"}","ig"),"${"+bN[1]+"}");}bJ=K.get(bG,bH);return bF.setAttribute(bJ,(((by.Curried3(M.fold))(bK))(bF.getAttribute(bJ)))(bD));}());});};W.fill=function(bC,bD,bE){while(true)if(bC.hasChildNodes())bE=bD.insertBefore(bC.lastChild,bE);else return null;};W.convertAttrs=function(bC){var bE,bF,bG,bH,bI,bJ,bK,bL;function bD(bM){var bN;bN=bC.getAttribute(bM);bN===null?void 0:bC.setAttribute(bM,bN.toLowerCase());}bE=bC.attributes;bF=[];bG=[];bH=[];for(bI=0,bJ=bE.length-1;bI<=bJ;bI++){bK=bE.item(bI);_8.StartsWith(bK.nodeName,"ws-on")&&bK.nodeName!=="ws-onafterrender"&&bK.nodeName!=="ws-on"?(bF.push(bK.nodeName),bG.push(X.string(bK.nodeName,{$:1,$0:"ws-on".length},null)+":"+bK.nodeValue.toLowerCase())):!_8.StartsWith(bK.nodeName,"ws-")&&(new a.RegExp(w.TextHoleRE())).test(bK.nodeValue)?(bK.nodeValue=(bL=new a.RegExp(w.TextHoleRE(),"g"),bK.nodeValue.replace(bL,function(bM,bN){return"${"+bN.toLowerCase()+"}";})),bH.push(bK.nodeName)):void 0;}!(bG.length==0)?bC.setAttribute("ws-on",_8.concat(" ",bG)):void 0;!(bH.length==0)?bC.setAttribute("ws-attr-holes",_8.concat(" ",bH)):void 0;bD("ws-hole");bD("ws-replace");bD("ws-attr");bD("ws-onafterrender");bD("ws-var");K.iter(function(bM){bC.removeAttribute(bM);},bF);};X.string=function(bC,bD,bE){return bD==null?bE!=null&&bE.$==1?bC.slice(0,bE.$0+1):"":bE==null?bC.slice(bD.$0):bC.slice(bD.$0,bE.$0+1);};Y.Get=function(bC){return bC instanceof a.Array?Y.ArrayEnumerator(bC):I.Equals(typeof bC,"string")?Y.StringEnumerator(bC):bC.GetEnumerator();};Y.ArrayEnumerator=function(bC){return new bd.New(0,null,function(bD){var bE;bE=bD.s;return bE<K.length(bC)&&(bD.c=K.get(bC,bE),bD.s=bE+1,true);},void 0);};Y.StringEnumerator=function(bC){return new bd.New(0,null,function(bD){var bE;bE=bD.s;return bE<bC.length&&(bD.c=bC[bE],bD.s=bE+1,true);},void 0);};Y.Get0=function(bC){return bC instanceof a.Array?Y.ArrayEnumerator(bC):I.Equals(typeof bC,"string")?Y.StringEnumerator(bC):"GetEnumerator0"in bC?bC.GetEnumerator0():bC.GetEnumerator();};M.insufficient=function(){return i.FailWith("The input sequence has an insufficient number of elements.");};Z=G.KeyCollection=by.Class({GetEnumerator$1:function(){return Y.Get(M.map(function(bC){return bC.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},f,Z);Z.New=by.Ctor(function(bC){f.New.call(this);this.d=bC;},Z);_0.get_UseAnimations=function(){return ba.UseAnimations();};_0.Play=function(bC){var bD;bD=null;return bf.Delay(function(){return bf.Bind(_0.Run(a.ignore,ba.Actions(bC)),function(){ba.Finalize(bC);return bf.Return(null);});});};_0.Append=function(bC,bD){return{$:0,$0:bg.Append(bC.$0,bD.$0)};};_0.Run=function(bC,bD){var bE;function bF(bG){function bH(bI,bJ){var bK;bK=bJ-bI;bD.Compute(bK);bC();return bK<=bE?void a.requestAnimationFrame(function(bL){bH(bI,bL);}):bG();}a.requestAnimationFrame(function(bI){bH(bI,bI);});}bE=bD.Duration;return bE===0?bf.Zero():bf.FromContinuations(function(bG,bH,bI){return bF.apply(null,[bG,bH,bI]);});};_0.Concat=function(bC){return{$:0,$0:bg.Concat(M.map(ba.List,bC))};};_1.BatchUpdatesEnabled=function(){bb.$cctor();return bb.BatchUpdatesEnabled;};_2.StartProcessor=function(bC){var bD;function bE(){var bF;bF=null;return bf.Delay(function(){return bf.Bind(bC,function(){var bG;bG=bD[0];return bG===1?(bD[0]=0,bf.Zero()):bG===2?(bD[0]=1,bE()):bf.Zero();});});}bD=[0];return function(){var bF;bF=bD[0];bF===0?(bD[0]=1,bf.Start(bE(),null)):bF===1?bD[0]=2:void 0;};};_3=g.Updates=by.Class({},null,_3);_3.Create=function(bC){var bD;bD=null;bD=_3.New(bC,null,function(){var bE;bE=bD.s;return bE===null?(bE=p.Copy(bD.c()),bD.s=bE,p.WhenObsoleteRun(bE,function(){bD.s=null;}),bE):bE;});return bD;};_3.New=function(bC,bD,bE){return new _3({c:bC,s:bD,v:bE});};_5=_4.T=by.Class({GetEnumerator:function(){return new bd.New(this,null,function(bC){var bD;bD=bC.s;return bD.$==0?false:(bC.c=bD.$0,bC.s=bD.$1,true);},void 0);},GetEnumerator0:function(){return Y.Get(this);}},null,_5);_7.New=function(bC,bD,bE,bF){var bG;bG={DynElem:bC,DynFlags:bD,DynNodes:bE};by.SetOptional(bG,"OnAfterRender",bF);return bG;};_8.concat=function(bC,bD){return K.ofSeq(bD).join(bC);};_8.SplitChars=function(bC,bD,bE){return _8.Split(bC,new a.RegExp("["+_8.RegexEscape(bD.join(""))+"]"),bE);};_8.StartsWith=function(bC,bD){return bC.substring(0,bD.length)==bD;};_8.Split=function(bC,bD,bE){return bE===1?K.filter(function(bF){return bF!=="";},_8.SplitWith(bC,bD)):_8.SplitWith(bC,bD);};_8.RegexEscape=function(bC){return bC.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};_8.SplitWith=function(bC,bD){return bC.split(bD);};_.New=function(bC,bD){return{PreviousNodes:bC,Top:bD};};$.get_Empty=function(){return{$:0,$0:new L.New$3()};};$.FindAll=function(bC){var bD;function bE(bG){if(bG!=null&&bG.$==0){bE(bG.$0);bE(bG.$1);}else if(bG!=null&&bG.$==1)bF(bG.$0);else if(bG!=null&&bG.$==2)bE(bG.$0.Current);else if(bG!=null&&bG.$==6)K.iter(bF,bG.$0.Holes);}function bF(bG){bD.push(bG);bE(bG.Children);}bD=[];bE(bC);return{$:0,$0:new L.New$2(bD)};};$.Filter=function(bC,bD){return{$:0,$0:bm.Filter(bC,bD.$0)};};$.Except=function(bC,bD){return{$:0,$0:bm.Except(bC.$0,bD.$0)};};$.ToArray=function(bC){return bm.ToArray(bC.$0);};$.Intersect=function(bC,bD){return{$:0,$0:bm.Intersect(bC.$0,bD.$0)};};ba.UseAnimations=function(){be.$cctor();return be.UseAnimations;};ba.Actions=function(bC){return ba.ConcatActions(K.choose(function(bD){return bD.$==1?{$:1,$0:bD.$0}:null;},bg.ToArray(bC.$0)));};ba.Finalize=function(bC){K.iter(function(bD){if(bD.$==0)bD.$0();},bg.ToArray(bC.$0));};ba.ConcatActions=function(bC){var bD,bE,bF,bG;bD=R.ofSeqNonCopying(bC);bE=K.length(bD);return bE===0?ba.Const():bE===1?K.get(bD,0):(bF=M.max(M.map(function(bH){return bH.Duration;},bD)),(bG=K.map(function(bH){return ba.Prolong(bF,bH);},bD),ba.Def(bF,function(bH){K.iter(function(bI){bI.Compute(bH);},bG);})));};ba.List=function(bC){return bC.$0;};ba.Const=function(bC){return ba.Def(0,function(){return bC;});};ba.Def=function(bC,bD){return{Compute:bD,Duration:bC};};ba.Prolong=function(bC,bD){var bE,bF,bG;bE=bD.Compute;bF=bD.Duration;bG=bt.Create(function(){return bD.Compute(bD.Duration);});return{Compute:function(bH){return bH>=bF?bG.f():bE(bH);},Duration:bC};};bb.$cctor=function(){bb.$cctor=a.ignore;bb.BatchUpdatesEnabled=true;};_4.head=function(bC){return bC.$==1?bC.$0:_4.listEmpty();};_4.tail=function(bC){return bC.$==1?bC.$1:_4.listEmpty();};_4.listEmpty=function(){return i.FailWith("The input list was empty.");};bc.$cctor=function(){bc.$cctor=a.ignore;bc.EmptyAttr=null;};bd=Y.T=by.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},f,bd);bd.New=by.Ctor(function(bC,bD,bE,bF){f.New.call(this);this.s=bC;this.c=bD;this.n=bE;this.d=bF;},bd);be.$cctor=function(){be.$cctor=a.ignore;be.CubicInOut=bi.Custom(function(bC){var bD;bD=bC*bC;return 3*bD-2*(bD*bC);});be.UseAnimations=true;};bf.Delay=function(bC){return function(bD){try{(bC(null))(bD);}catch(bE){bD.k({$:1,$0:bE});}};};bf.Bind=function(bC,bD){return bf.checkCancel(function(bE){bC(bj.New(function(bF){var bG;if(bF.$==0){bG=bF.$0;bf.scheduler().Fork(function(){try{(bD(bG))(bE);}catch(bH){bE.k({$:1,$0:bH});}});}else bf.scheduler().Fork(function(){bE.k(bF);});},bE.ct));});};bf.Zero=function(){bk.$cctor();return bk.Zero;};bf.Start=function(bC,bD){var bE,bF;bE=(bF=(bf.defCTS())[0],bD==null?bF:bD.$0);bf.scheduler().Fork(function(){if(!bE.c)bC(bj.New(function(bG){if(bG.$==1)bf.UncaughtAsyncError(bG.$0);},bE));});};bf.Return=function(bC){return function(bD){bD.k({$:0,$0:bC});};};bf.checkCancel=function(bC){return function(bD){if(bD.ct.c)bf.cancel(bD);else bC(bD);};};bf.defCTS=function(){bk.$cctor();return bk.defCTS;};bf.UncaughtAsyncError=function(bC){bz.log("WebSharper: Uncaught asynchronous exception",bC);};bf.FromContinuations=function(bC){return function(bD){var bE;function bF(bG){if(bE[0])i.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bE[0]=true;bf.scheduler().Fork(bG);}}bE=[false];bC(function(bG){bF(function(){bD.k({$:0,$0:bG});});},function(bG){bF(function(){bD.k({$:1,$0:bG});});},function(bG){bF(function(){bD.k({$:2,$0:bG});});});};};bf.cancel=function(bC){bC.k({$:2,$0:new bs.New(bC.ct)});};bf.scheduler=function(){bk.$cctor();return bk.scheduler;};bg.Append=function(bC,bD){return bC.$==0?bD:bD.$==0?bC:{$:2,$0:bC,$1:bD};};bg.ToArray=function(bC){var bD;function bE(bF){if(bF.$==1)bD.push(bF.$0);else if(bF.$==2){bE(bF.$0);bE(bF.$1);}else if(bF.$==3)K.iter(function(bG){bD.push(bG);},bF.$0);}bD=[];bE(bC);return bD.slice(0);};bg.Concat=function(bC){var bD;bD=R.ofSeqNonCopying(bC);return R.TreeReduce(bg.Empty(),bg.Append,bD);};bg.Empty=function(){bu.$cctor();return bu.Empty;};bh.Clear=function(bC){bC.splice(0,K.length(bC));};bi=g.Easing=by.Class({},f,bi);bi.Custom=function(bC){return new bi.New(bC);};bi.New=by.Ctor(function(bC){f.New.call(this);this.transformTime=bC;},bi);bj.New=function(bC,bD){return{k:bC,ct:bD};};bk.$cctor=function(){bk.$cctor=a.ignore;bk.noneCT=bl.New(false,[]);bk.scheduler=new bo.New();bk.defCTS=[new bp.New()];bk.Zero=bf.Return();bk.GetCT=function(bC){bC.k({$:0,$0:bC.ct});};};bl.New=function(bC,bD){return{c:bC,r:bD};};bm.Filter=function(bC,bD){return new L.New$2(K.filter(bC,bm.ToArray(bD)));};bm.Except=function(bC,bD){var bE;bE=new L.New$2(bm.ToArray(bD));bE.ExceptWith(bm.ToArray(bC));return bE;};bm.ToArray=function(bC){var bD;bD=K.create(bC.get_Count(),void 0);bC.CopyTo(bD);return bD;};bm.Intersect=function(bC,bD){var bE;bE=new L.New$2(bm.ToArray(bC));bE.IntersectWith(bm.ToArray(bD));return bE;};bn.concat=function(bC){var bD,bE;bD=[];for(var bF in bC)bD.push.apply(bD,bC[bF]);return bD;};bo=bf.Scheduler=by.Class({Fork:function(bC){var bD;bD=this;this.robin.push(bC);this.idle?(this.idle=false,a.setTimeout(function(){bD.tick();},0)):void 0;},tick:function(){var bC,bD,bE;bD=this;bE=bB.now();bC=true;while(bC)if(this.robin.length===0){this.idle=true;bC=false;}else{(this.robin.shift())();bB.now()-bE>40?(a.setTimeout(function(){bD.tick();},0),bC=false):void 0;}}},f,bo);bo.New=by.Ctor(function(){f.New.call(this);this.idle=true;this.robin=[];},bo);bp=b.CancellationTokenSource=by.Class({},f,bp);bp.New=by.Ctor(function(){f.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bp);bq.Children=function(bC,bD){var bE,bF,bG;if(bD!=null&&bD.$==1){bG=[];bE=bD.$0[0].nextSibling;while(bE!==bD.$0[1]){bG.push(bE);bE=bE.nextSibling;}return{$:0,$0:bG};}else return{$:0,$0:K.init(bC.childNodes.length,(bF=bC.childNodes,function(bH){return bF[bH];}))};};bq.Except=function(bC,bD){var bE;bE=bC.$0;return{$:0,$0:K.filter(function(bF){return K.forall(function(bG){return!(bF===bG);},bE);},bD.$0)};};bq.Iter=function(bC,bD){K.iter(bC,bD.$0);};bq.DocChildren=function(bC){var bD;function bE(bF){if(bF!=null&&bF.$==2)bE(bF.$0.Current);else if(bF!=null&&bF.$==1)bD.push(bF.$0.El);else if(bF==null);else if(bF!=null&&bF.$==5)bD.push(bF.$0);else if(bF!=null&&bF.$==4)bD.push(bF.$0.Text);else if(bF!=null&&bF.$==6)K.iter(function(bG){if(bG==null||bG.constructor===V)bE(bG);else bD.push(bG);},bF.$0.Els);else{bE(bF.$0);bE(bF.$1);}}bD=[];bE(bC.Children);return{$:0,$0:R.ofSeqNonCopying(bD)};};bs=b.OperationCanceledException=by.Class({},br,bs);bs.New=by.Ctor(function(bC){bs.New$1.call(this,"The operation was canceled.",null,bC);},bs);bs.New$1=by.Ctor(function(bC,bD,bE){this.message=bC;this.inner=bD;V.setPrototypeOf(this,bs.prototype);this.ct=bE;},bs);bt.Create=function(bC){return bw.New(false,bC,bt.forceLazy);};bt.forceLazy=function(){var bC;bC=this.v();this.c=true;this.v=bC;this.f=bt.cachedLazy;return bC;};bt.cachedLazy=function(){return this.v;};bu.$cctor=function(){bu.$cctor=a.ignore;bu.Empty={$:0};};bw.New=function(bC,bD,bE){return{c:bC,v:bD,f:bE};};by.OnLoad(function(){e.Main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
